{% extends "base.html" %}

{% block content %}
<h1>Painel do Vendedor</h1>
<p>Bem-vindo, {{ current_user.nome }}!</p>

<h2 class="mt-4">Pedidos Aguardando Pagamento</h2>

<div class="list-group">
    {% for pedido in pedidos %}
    <div class="list-group-item d-flex justify-content-between align-items-center">
        <div>
            <h5 class="mb-1">Pedido #{{ pedido.id }}</h5>
            <p class="mb-1">Cliente: <strong>{{ pedido.comprador.nome }}</strong></p>
            <small>Data do Pedido: {{ pedido.data_pedido.strftime('%d/%m/%Y %H:%M') }}</small>
            <br>
            <small>
                Itens:
                <ul>
                    {% for item in pedido.itens %}
                    <li>{{ item.quantidade }}x {{ item.peca.nome }}</li>
                    {% endfor %}
                </ul>
            </small>
        </div>

        <form action="{{ url_for('routes.confirmar_pagamento', pedido_id=pedido.id) }}" method="POST">
            <button type="submit" class="btn btn-success btn-lg">Confirmar Pagamento</button>
        </form>
    </div>
    {% else %}
    <p>Nenhum pedido aguardando pagamento no momento.</p>
    {% endfor %}
</div>
{% endblock %}